# Server

API server

Недоделанный бойлерплейт для проектов

# Структура
Entity - сущности лежат в корне проекта

Repository - отвечает за инкапсуляцию получения и поиска данных, располагается в папке ```db/```

Services - сервисы отвечают за бизнес логику приложения ```services/```

Handlers - слой отвечающий за http хэндлеры ```handlers/```

Router - роутер в папке ```server/```

Response - слой для фронтов, так как просили специфическую структуру json, пришлось абстрагировать слой отдачи данных ```request/```

# Swagger
В папке docs хранятся структуры для пакета go-swagger
Минус пакета, что разработчики развивают его в свободное время, больше похож на пет проджект

# ORM/Entity framework
Написан свой орм с миграцией по тэгам структур

Есть генерация стейтментов(захардкожена под драйвер mysql), на основе ```Condition``` структуры условия и заданной операции ```ops``` тэга структуры entity

Выбор structure fields по тэгам ops

Многие вещи нужно переписать

Возможно стоило заменить на https://github.com/ent/ent

# Video Transcoding to HLS
Используется 2 готовых решения на основе docker контейнеров:
- Handbrake для конвертации практически любого видео в формат mp4
- ffmpeg для 2 этапа конвертации видео в hls


# TODO
- вынести орм из корневой директории
- перевод слой сервисов на генерацию GRPC
- переписать сервис авторизации
- реструктуризация пакета components(временное решение зацикливания пакетов)
- вынести воркеры из слоя сервисов
- реализовать транзакции для счетчиков